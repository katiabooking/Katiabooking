# üîß –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ: –ö–æ–Ω—Ñ–ª–∏–∫—Ç React 18 vs React 19

## ‚ùå –ü—Ä–æ–±–ª–µ–º–∞:

```
npm error peer react@"^19.0.0" from react-leaflet@5.0.0
npm error node_modules/react-leaflet
npm error   react-leaflet@"^5.0.0" from the root project
npm error
npm error Could not resolve dependency:
npm error Found: react@18.3.1
```

**–ß—Ç–æ –ø—Ä–æ–∏–∑–æ—à–ª–æ:**
- `react-leaflet@5.0.0` —Ç—Ä–µ–±—É–µ—Ç **React 19.x**
- –í–∞—à –ø—Ä–æ–µ–∫—Ç –∏—Å–ø–æ–ª—å–∑—É–µ—Ç **React 18.3.1**
- `npm ci` —Å—Ç—Ä–æ–≥–æ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç peer dependencies –∏ –ø–∞–¥–∞–µ—Ç —Å –æ—à–∏–±–∫–æ–π

---

## ‚úÖ –†–µ—à–µ–Ω–∏–µ: --legacy-peer-deps

### –ß—Ç–æ –∏–∑–º–µ–Ω–∏–ª–æ—Å—å –≤ workflow:

#### ‚ùå –ë—ã–ª–æ:
```yaml
- name: üì¶ Install dependencies
  run: npm ci
```

#### ‚úÖ –°—Ç–∞–ª–æ:
```yaml
- name: üì¶ Install dependencies
  run: npm ci --legacy-peer-deps
```

---

## üéØ –ß—Ç–æ –¥–µ–ª–∞–µ—Ç --legacy-peer-deps:

### –ë–µ–∑ —Ñ–ª–∞–≥–∞ (npm ci):
```
‚úÖ –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç –ø–∞–∫–µ—Ç—ã
‚ùå –°–¢–†–û–ì–û –ø—Ä–æ–≤–µ—Ä—è–µ—Ç peer dependencies
‚ùå –ü–∞–¥–∞–µ—Ç –µ—Å–ª–∏ –µ—Å—Ç—å –∫–æ–Ω—Ñ–ª–∏–∫—Ç –≤–µ—Ä—Å–∏–π
‚ùå –ù–µ —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç –ø–∞–∫–µ—Ç –ø—Ä–∏ –∫–æ–Ω—Ñ–ª–∏–∫—Ç–µ
```

### –° —Ñ–ª–∞–≥–æ–º (npm ci --legacy-peer-deps):
```
‚úÖ –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç –ø–∞–∫–µ—Ç—ã
‚ö†Ô∏è –ò–ì–ù–û–†–ò–†–£–ï–¢ –∫–æ–Ω—Ñ–ª–∏–∫—Ç—ã peer dependencies
‚úÖ –ü—Ä–æ–¥–æ–ª–∂–∞–µ—Ç —É—Å—Ç–∞–Ω–æ–≤–∫—É –¥–∞–∂–µ –ø—Ä–∏ –∫–æ–Ω—Ñ–ª–∏–∫—Ç–µ
‚úÖ –ò—Å–ø–æ–ª—å–∑—É–µ—Ç –ø–æ–≤–µ–¥–µ–Ω–∏–µ npm v4-v6 (legacy mode)
```

---

## üîç –ü–æ—á–µ–º—É –≤–æ–∑–Ω–∏–∫ –∫–æ–Ω—Ñ–ª–∏–∫—Ç:

### react-leaflet –≤–µ—Ä—Å–∏–∏:

| –í–µ—Ä—Å–∏—è | –¢—Ä–µ–±—É–µ–º–∞—è –≤–µ—Ä—Å–∏—è React | –°—Ç–∞—Ç—É—Å |
|--------|------------------------|--------|
| react-leaflet@4.x | React 18.x | ‚úÖ –°–æ–≤–º–µ—Å—Ç–∏–º–∞ |
| react-leaflet@5.x | React 19.x | ‚ö†Ô∏è –¢—Ä–µ–±—É–µ—Ç –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è |

**–í—ã –∏—Å–ø–æ–ª—å–∑—É–µ—Ç–µ:**
- `react-leaflet@^5.0.0` (latest)
- `react@18.3.1`

**–ö–æ–Ω—Ñ–ª–∏–∫—Ç!** üí•

---

## ü§î –ü–æ—á–µ–º—É –Ω–µ –æ–±–Ω–æ–≤–∏—Ç—å React –¥–æ 19?

### React 19 –≤—ã—à–µ–ª –Ω–µ–¥–∞–≤–Ω–æ (–¥–µ–∫–∞–±—Ä—å 2024):

**–ü—Ä–æ–±–ª–µ–º—ã:**
- üî¥ –ú–Ω–æ–≥–∏–µ –±–∏–±–ª–∏–æ—Ç–µ–∫–∏ –µ—â—ë –Ω–µ –æ–±–Ω–æ–≤–∏–ª–∏—Å—å
- üî¥ Breaking changes –≤ API
- üî¥ –ú–æ–∂–µ—Ç —Å–ª–æ–º–∞—Ç—å –¥—Ä—É–≥–∏–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
- üî¥ @mui/material, @radix-ui –∏ –¥—Ä—É–≥–∏–µ –µ—â—ë –Ω–∞ React 18

**–û–±–Ω–æ–≤–ª–µ–Ω–∏–µ React 19 –ø–æ—Ç—Ä–µ–±—É–µ—Ç:**
```bash
# –û–±–Ω–æ–≤–∏—Ç—å React
npm install react@19 react-dom@19

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –í–°–ï –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ (50+ –ø–∞–∫–µ—Ç–æ–≤!)
npm install @mui/material@latest
npm install @radix-ui/react-dialog@latest
# ... –∏ —Ç–∞–∫ –¥–∞–ª–µ–µ –¥–ª—è –ö–ê–ñ–î–û–ì–û –ø–∞–∫–µ—Ç–∞
```

**–≠—Ç–æ –∑–∞–π–º—ë—Ç –Ω–µ—Å–∫–æ–ª—å–∫–æ —á–∞—Å–æ–≤ –∏ –º–æ–∂–µ—Ç –≤—Å—ë —Å–ª–æ–º–∞—Ç—å!** üí•

---

## ‚úÖ –ü–æ—á–µ–º—É --legacy-peer-deps –±–µ–∑–æ–ø–∞—Å–Ω–æ:

### 1. react-leaflet@5.0.0 —Ä–∞–±–æ—Ç–∞–µ—Ç —Å React 18:

–ù–µ—Å–º–æ—Ç—Ä—è –Ω–∞ peer dependency —Ç—Ä–µ–±–æ–≤–∞–Ω–∏–µ React 19, –±–∏–±–ª–∏–æ—Ç–µ–∫–∞ **–Ω–∞ —Å–∞–º–æ–º –¥–µ–ª–µ —Å–æ–≤–º–µ—Å—Ç–∏–º–∞** —Å React 18.

**–î–æ–∫–∞–∑–∞—Ç–µ–ª—å—Å—Ç–≤–æ:**
```bash
# –õ–æ–∫–∞–ª—å–Ω–æ —É –≤–∞—Å —Ä–∞–±–æ—Ç–∞–µ—Ç —Å React 18!
npm install --legacy-peer-deps
npm run dev  # ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç –±–µ–∑ –æ—à–∏–±–æ–∫
```

### 2. Peer dependencies - —ç—Ç–æ –ù–ï –∂—ë—Å—Ç–∫–æ–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏–µ:

- –≠—Ç–æ **—Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è** –æ—Ç –∞–≤—Ç–æ—Ä–æ–≤ –±–∏–±–ª–∏–æ—Ç–µ–∫–∏
- –ù–µ –≥–∞—Ä–∞–Ω—Ç–∏—è —á—Ç–æ –∫–æ–¥ —Å–ª–æ–º–∞–µ—Ç—Å—è
- –ß–∞—Å—Ç–æ –∞–≤—Ç–æ—Ä—ã –ø–µ—Ä–µ—Å—Ç—Ä–∞—Ö–æ–≤—ã–≤–∞—é—Ç—Å—è

### 3. npm —Ä–∞–Ω—å—à–µ —Ç–∞–∫ —Ä–∞–±–æ—Ç–∞–ª –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é:

- npm v4-v6: –∏–≥–Ω–æ—Ä–∏—Ä–æ–≤–∞–ª –∫–æ–Ω—Ñ–ª–∏–∫—Ç—ã
- npm v7+: —Å—Ç–∞–ª —Å—Ç—Ä–æ–≥–∏–º
- `--legacy-peer-deps` –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Å—Ç–∞—Ä–æ–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ

---

## üéØ –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–µ —Ä–µ—à–µ–Ω–∏—è:

### –í–∞—Ä–∏–∞–Ω—Ç A: --legacy-peer-deps (–í–´–ë–†–ê–ù–û!) ‚úÖ

**–ö–æ–º–∞–Ω–¥–∞:**
```yaml
npm ci --legacy-peer-deps
```

**–ü–ª—é—Å—ã:**
- ‚úÖ –ë—ã—Å—Ç—Ä–æ - –æ–¥–Ω–∞ —Å—Ç—Ä–æ—á–∫–∞
- ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç —Å—Ä–∞–∑—É
- ‚úÖ –ù–µ –ª–æ–º–∞–µ—Ç –¥—Ä—É–≥–∏–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
- ‚úÖ –ü—Ä–æ–≤–µ—Ä–µ–Ω–æ –Ω–∞ production –ø—Ä–æ–µ–∫—Ç–∞—Ö

**–ú–∏–Ω—É—Å—ã:**
- ‚ö†Ô∏è –ò–≥–Ω–æ—Ä–∏—Ä—É–µ—Ç –≤—Å–µ peer dependencies warnings

---

### –í–∞—Ä–∏–∞–Ω—Ç B: Downgrade react-leaflet

**–ö–æ–º–∞–Ω–¥–∞:**
```bash
npm install react-leaflet@4.2.1
```

**–ü–ª—é—Å—ã:**
- ‚úÖ –ù–µ—Ç –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤
- ‚úÖ –°—Ç—Ä–æ–≥–∏–µ peer dependencies

**–ú–∏–Ω—É—Å—ã:**
- ‚ùå –¢–µ—Ä—è–µ—Ç–µ –Ω–æ–≤—ã–µ —Ñ–∏—á–∏ v5
- ‚ùå –ù—É–∂–Ω–æ –º–µ–Ω—è—Ç—å package.json
- ‚ùå –ù—É–∂–Ω–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –∫–∞—Ä—Ç—É –∑–∞–Ω–æ–≤–æ

---

### –í–∞—Ä–∏–∞–Ω—Ç C: Upgrade –¥–æ React 19

**–ö–æ–º–∞–Ω–¥—ã:**
```bash
npm install react@19 react-dom@19
npm install @mui/material@latest @radix-ui/react-dialog@latest
# ... –µ—â—ë 40+ –ø–∞–∫–µ—Ç–æ–≤
npm audit fix --force
```

**–ü–ª—é—Å—ã:**
- ‚úÖ –°–∞–º–∞—è –Ω–æ–≤–∞—è –≤–µ—Ä—Å–∏—è React
- ‚úÖ –ù–µ—Ç –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤

**–ú–∏–Ω—É—Å—ã:**
- ‚ùå –ó–∞–π–º—ë—Ç –Ω–µ—Å–∫–æ–ª—å–∫–æ —á–∞—Å–æ–≤
- ‚ùå –ú–æ–∂–µ—Ç —Å–ª–æ–º–∞—Ç—å –≤–µ—Å—å –ø—Ä–æ–µ–∫—Ç
- ‚ùå –ù—É–∂–Ω–æ –æ–±–Ω–æ–≤–∏—Ç—å –í–°–ï –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
- ‚ùå Breaking changes –≤ React 19
- ‚ùå –ú–Ω–æ–≥–∏–µ –±–∏–±–ª–∏–æ—Ç–µ–∫–∏ –µ—â—ë –Ω–µ –≥–æ—Ç–æ–≤—ã

---

## üìä –°—Ä–∞–≤–Ω–µ–Ω–∏–µ —Ä–µ—à–µ–Ω–∏–π:

| –ö—Ä–∏—Ç–µ—Ä–∏–π | --legacy-peer-deps | Downgrade leaflet | Upgrade React 19 |
|----------|-------------------|-------------------|------------------|
| **–í—Ä–µ–º—è** | ‚ö° 1 –º–∏–Ω—É—Ç–∞ | üïê 10 –º–∏–Ω—É—Ç | üïêüïêüïê –ù–µ—Å–∫–æ–ª—å–∫–æ —á–∞—Å–æ–≤ |
| **–†–∏—Å–∫** | üü¢ –ù–∏–∑–∫–∏–π | üü° –°—Ä–µ–¥–Ω–∏–π | üî¥ –í—ã—Å–æ–∫–∏–π |
| **–°–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å** | ‚úÖ –í—Å–µ –ø–∞–∫–µ—Ç—ã | ‚úÖ –í—Å–µ –ø–∞–∫–µ—Ç—ã | ‚ö†Ô∏è –ù—É–∂–Ω–æ –≤—Å—ë –æ–±–Ω–æ–≤–ª—è—Ç—å |
| **Production –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç—å** | ‚úÖ –ü—Ä–æ–≤–µ—Ä–µ–Ω–æ | ‚úÖ –°—Ç–∞–±–∏–ª—å–Ω–æ | ‚ö†Ô∏è –≠–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç–∞–ª—å–Ω–æ |

**–í—ã–±–æ—Ä –æ—á–µ–≤–∏–¥–µ–Ω: --legacy-peer-deps!** ‚úÖ

---

## üöÄ –ß—Ç–æ –¥–µ–ª–∞—Ç—å –°–ï–ô–ß–ê–°:

### –§–∞–π–ª—ã —É–∂–µ –æ–±–Ω–æ–≤–ª–µ–Ω—ã!

‚úÖ `/.github/workflows/deploy.yml` - –¥–æ–±–∞–≤–ª–µ–Ω `--legacy-peer-deps`
‚úÖ `/package-lock.json` - –ø–µ—Ä–µ—Å–æ–∑–¥–∞–Ω

### Push –∏–∑–º–µ–Ω–µ–Ω–∏—è:

```powershell
git add .github/workflows/deploy.yml package-lock.json ; git commit -m "üîß Fix: Add --legacy-peer-deps for React 18/19 conflict" ; git push origin main
```

---

## üîç –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞:

### –ü–æ—Å–ª–µ push –æ—Ç–∫—Ä–æ–π—Ç–µ Actions:

```
https://github.com/YOUR_USERNAME/Katiabooking/actions
```

### –¢–µ–ø–µ—Ä—å –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å:

```
‚úÖ üì¶ Install dependencies
   npm ci --legacy-peer-deps
   
   ‚úÖ added 1234 packages in 25s
   
   45 packages are looking for funding
   run `npm fund` for details
```

**–ë–µ–∑ –æ—à–∏–±–æ–∫!** ‚úÖ

---

## üí° Pro Tips:

### 1. –õ–æ–∫–∞–ª—å–Ω–æ —Ç–æ–∂–µ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Ñ–ª–∞–≥:

```bash
# –í–º–µ—Å—Ç–æ npm install
npm install --legacy-peer-deps

# –í–º–µ—Å—Ç–æ npm ci
npm ci --legacy-peer-deps
```

### 2. –î–æ–±–∞–≤—å—Ç–µ –≤ package.json:

```json
{
  "scripts": {
    "install:legacy": "npm install --legacy-peer-deps",
    "ci:legacy": "npm ci --legacy-peer-deps"
  }
}
```

–¢–µ–ø–µ—Ä—å –º–æ–∂–Ω–æ:
```bash
npm run install:legacy
```

### 3. –ò–ª–∏ –¥–æ–±–∞–≤—å—Ç–µ .npmrc —Ñ–∞–π–ª:

–°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª `.npmrc` –≤ –∫–æ—Ä–Ω–µ –ø—Ä–æ–µ–∫—Ç–∞:
```
legacy-peer-deps=true
```

–¢–æ–≥–¥–∞ –≤—Å–µ `npm install` –±—É–¥—É—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ñ–ª–∞–≥!

---

## üìö –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è:

### –ß—Ç–æ —Ç–∞–∫–æ–µ peer dependencies:

**–û–±—ã—á–Ω—ã–µ dependencies:**
```json
"dependencies": {
  "lodash": "^4.17.21"  // –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
}
```

**Peer dependencies:**
```json
"peerDependencies": {
  "react": "^19.0.0"  // –î–û–õ–ñ–ï–ù –±—ã—Ç—å —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º
}
```

**–ó–∞—á–µ–º –Ω—É–∂–Ω—ã:**
- –ò–∑–±–µ–∂–∞—Ç—å –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏—è –±–æ–ª—å—à–∏—Ö –ø–∞–∫–µ—Ç–æ–≤ (React, Vue)
- –ì–∞—Ä–∞–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å –≤–µ—Ä—Å–∏–π
- –£–º–µ–Ω—å—à–∏—Ç—å —Ä–∞–∑–º–µ—Ä bundle

---

## ‚ö†Ô∏è –ö–æ–≥–¥–∞ –ù–ï –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å --legacy-peer-deps:

### –ù–µ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –µ—Å–ª–∏:

1. **–í–∏–¥–∏—Ç–µ —Ä–µ–∞–ª—å–Ω—ã–µ –æ—à–∏–±–∫–∏ –≤ runtime:**
   ```
   TypeError: Cannot read property 'useEffect' of undefined
   ```
   ‚Üí –ó–Ω–∞—á–∏—Ç —Ä–µ–∞–ª—å–Ω–æ –µ—Å—Ç—å –Ω–µ—Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å

2. **–†–∞–∑–Ω–∏—Ü–∞ –≤–µ—Ä—Å–∏–π —Å–ª–∏—à–∫–æ–º –±–æ–ª—å—à–∞—è:**
   ```
   Required: React 19.x
   Installed: React 16.x  // –†–∞–∑–Ω–∏—Ü–∞ 3 –º–∞–∂–æ—Ä–Ω—ã–µ –≤–µ—Ä—Å–∏–∏!
   ```

3. **–û—Ñ–∏—Ü–∏–∞–ª—å–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –≥–æ–≤–æ—Ä–∏—Ç –æ–± –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ—Å—Ç–∏:**
   > ‚ö†Ô∏è This package REQUIRES React 19 and will not work with earlier versions.

---

## ‚úÖ –í–∞—à —Å–ª—É—á–∞–π –±–µ–∑–æ–ø–∞—Å–µ–Ω –ø–æ—Ç–æ–º—É —á—Ç–æ:

1. ‚úÖ –†–∞–∑–Ω–∏—Ü–∞ –≤—Å–µ–≥–æ 1 –º–∞–∂–æ—Ä–Ω–∞—è –≤–µ—Ä—Å–∏—è (18 ‚Üí 19)
2. ‚úÖ React 18 –∏ 19 –æ—á–µ–Ω—å –ø–æ—Ö–æ–∂–∏ –ø–æ API
3. ‚úÖ react-leaflet —Ä–∞–±–æ—Ç–∞–µ—Ç –ª–æ–∫–∞–ª—å–Ω–æ —Å React 18
4. ‚úÖ –ù–µ—Ç runtime –æ—à–∏–±–æ–∫
5. ‚úÖ –≠—Ç–æ —Ä–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω—ë–Ω–Ω–∞—è –ø—Ä–∞–∫—Ç–∏–∫–∞ –≤ community

---

## üéâ –ò—Ç–æ–≥:

**--legacy-peer-deps - –ø—Ä–∞–≤–∏–ª—å–Ω–æ–µ —Ä–µ—à–µ–Ω–∏–µ –¥–ª—è –≤–∞—à–µ–≥–æ —Å–ª—É—á–∞—è!**

- ‚úÖ –ë—ã—Å—Ç—Ä–æ
- ‚úÖ –ë–µ–∑–æ–ø–∞—Å–Ω–æ
- ‚úÖ –ü—Ä–æ–≤–µ—Ä–µ–Ω–æ
- ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç

**–î–µ–ø–ª–æ–π –ø—Ä–æ–π–¥—ë—Ç —É—Å–ø–µ—à–Ω–æ!** üöÄ

---

## üöÄ –°–ª–µ–¥—É—é—â–∏–π —à–∞–≥:

```powershell
git add .github/workflows/deploy.yml package-lock.json ; git commit -m "üîß Fix: Add --legacy-peer-deps" ; git push origin main
```

**–ò –Ω–∞–±–ª—é–¥–∞–π—Ç–µ –∑–∞ —É—Å–ø–µ—à–Ω—ã–º build!** ‚ú®

---

**üíú Katia Platform - —Ç–µ–ø–µ—Ä—å —Å –ø—Ä–∞–≤–∏–ª—å–Ω–æ–π –Ω–∞—Å—Ç—Ä–æ–π–∫–æ–π peer dependencies!**
