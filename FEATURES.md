# üéØ Katia Platform - –û—Å–Ω–æ–≤–Ω—ã–µ –§—É–Ω–∫—Ü–∏–∏

> –ü–æ–¥—Ä–æ–±–Ω–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ –∫–ª—é—á–µ–≤—ã—Ö —Å–∏—Å—Ç–µ–º –∏ —Ñ—É–Ω–∫—Ü–∏–π –ø–ª–∞—Ç—Ñ–æ—Ä–º—ã

---

## üí∞ –ú—É–ª—å—Ç–∏–≤–∞–ª—é—Ç–Ω–∞—è –°–∏—Å—Ç–µ–º–∞

### –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–µ –≤–∞–ª—é—Ç—ã
- üá∫üá∏ **USD** - US Dollar
- üá™üá∫ **EUR** - Euro
- üá¨üáß **GBP** - British Pound
- üá¶üá™ **AED** - UAE Dirham
- üá∏üá¶ **SAR** - Saudi Riyal
- üá∑üá∫ **RUB** - Russian Ruble

### Regional Pricing (Price Parity)
**AED –∏ SAR –∏—Å–ø–æ–ª—å–∑—É—é—Ç —Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —Ü–µ–Ω—ã 1:1 —Å USD:**

```
USD $99  ‚Üí AED 99  (–Ω–µ 363.33!)
USD $299 ‚Üí AED 299 (–Ω–µ 1089.99!)
USD $499 ‚Üí AED 499 (–Ω–µ 1831.66!)
```

**–ü–æ—á–µ–º—É?**
- –ü—Å–∏—Ö–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–π —Ñ–∞–∫—Ç–æ—Ä (AED363 –≤—ã–≥–ª—è–¥–∏—Ç –¥–æ—Ä–æ–≥–æ)
- –°—Ç–∞–Ω–¥–∞—Ä—Ç –≤ —Ä–µ–≥–∏–æ–Ω–µ (Apple, Microsoft –∏—Å–ø–æ–ª—å–∑—É—é—Ç 1:1)
- –ü–æ–∫—É–ø–∞—Ç–µ–ª—å—Å–∫–∞—è —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç—å

### Real-time –ö–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è
**EUR, GBP, RUB –∏—Å–ø–æ–ª—å–∑—É—é—Ç –∫—É—Ä—Å—ã –≤–∞–ª—é—Ç:**
```typescript
EUR: ~0.92
GBP: ~0.79
RUB: ~92.00
```

### –ì–¥–µ —Ä–∞–±–æ—Ç–∞–µ—Ç?
- ‚úÖ PricingPage (–≤—Å–µ –ø–ª–∞–Ω—ã)
- ‚úÖ SalonCard (—Ü–µ–Ω—ã —Å–∞–ª–æ–Ω–æ–≤)
- ‚úÖ SalonProfile (—É—Å–ª—É–≥–∏)
- ‚úÖ BookingFlow (–∏—Ç–æ–≥–æ–≤–∞—è —Å—É–º–º–∞)
- ‚úÖ ClientDashboard (–∏—Å—Ç–æ—Ä–∏—è)
- ‚úÖ CheckoutModal (–æ–ø–ª–∞—Ç–∞)
- ‚úÖ Quick Retail (32 –ø—Ä–æ–¥—É–∫—Ç–∞)

---

## üéÅ –°–∏—Å—Ç–µ–º–∞ –ü–æ–¥–∞—Ä–æ—á–Ω—ã—Ö –°–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–æ–≤

### 11 –¢–µ–º–∞—Ç–∏—á–µ—Å–∫–∏—Ö –î–∏–∑–∞–π–Ω–æ–≤

1. **Birthday** - –î–µ–Ω—å —Ä–æ–∂–¥–µ–Ω–∏—è
2. **Anniversary** - –ì–æ–¥–æ–≤—â–∏–Ω–∞
3. **Wedding** - –°–≤–∞–¥—å–±–∞
4. **Mothers Day** - –î–µ–Ω—å –º–∞—Ç–µ—Ä–∏
5. **Valentines** - –î–µ–Ω—å –°–≤—è—Ç–æ–≥–æ –í–∞–ª–µ–Ω—Ç–∏–Ω–∞
6. **Christmas** - –†–æ–∂–¥–µ—Å—Ç–≤–æ
7. **Graduation** - –í—ã–ø—É—Å–∫–Ω–æ–π
8. **Thank You** - –ë–ª–∞–≥–æ–¥–∞—Ä–Ω–æ—Å—Ç—å
9. **Congratulations** - –ü–æ–∑–¥—Ä–∞–≤–ª–µ–Ω–∏—è
10. **Get Well** - –°–∫–æ—Ä–µ–π—à–µ–≥–æ –≤—ã–∑–¥–æ—Ä–æ–≤–ª–µ–Ω–∏—è
11. **Just Because** - –ü—Ä–æ—Å—Ç–æ —Ç–∞–∫

### –§—É–Ω–∫—Ü–∏–∏
- ‚úÖ –ü–æ–∫—É–ø–∫–∞ —Å –≤—ã–±–æ—Ä–æ–º —Ç–µ–º—ã
- ‚úÖ Custom amount ($25-$500)
- ‚úÖ –ü–µ—Ä—Å–æ–Ω–∞–ª—å–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ
- ‚úÖ QR –∫–æ–¥ –¥–ª—è redemption
- ‚úÖ Email sharing
- ‚úÖ Social sharing (WhatsApp, Twitter, Facebook)
- ‚úÖ Download –∫–∞–∫ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ
- ‚úÖ Tracking —Å—Ç–∞—Ç—É—Å–∞
- ‚úÖ Expiration dates
- ‚úÖ Balance management

### Redemption Flow
1. Client –ø–æ–∫—É–ø–∞–µ—Ç certificate
2. –ü–æ–ª—É—á–∞–µ—Ç QR –∫–æ–¥ + —É–Ω–∏–∫–∞–ª—å–Ω—ã–π –∫–æ–¥
3. –î–µ–ª–∏—Ç—Å—è —Å –ø–æ–ª—É—á–∞—Ç–µ–ª–µ–º
4. –ü–æ–ª—É—á–∞—Ç–µ–ª—å —Å–∫–∞–Ω–∏—Ä—É–µ—Ç QR
5. –í—ã–±–∏—Ä–∞–µ—Ç —Å–∞–ª–æ–Ω –∏ —É—Å–ª—É–≥—É
6. –ü—Ä–∏–º–µ–Ω—è–µ—Ç –±–∞–ª–∞–Ω—Å –∫ booking
7. Certificate —á–∞—Å—Ç–∏—á–Ω–æ/–ø–æ–ª–Ω–æ—Å—Ç—å—é –ø–æ–≥–∞—à–µ–Ω

### –†–æ–ª–∏ –¥–æ—Å—Ç—É–ø–∞
- **Client**: –ü–æ–∫—É–ø–∫–∞, sharing, redemption
- **Master**: –ü—Ä–æ—Å–º–æ—Ç—Ä –ø—Ä–∏–º–µ–Ω–µ–Ω–Ω—ã—Ö certificates
- **Admin**: –í—Å–µ certificate —Å–∞–ª–æ–Ω–∞
- **Owner**: –í—Å–µ certificates, –∞–Ω–∞–ª–∏—Ç–∏–∫–∞

---

## üí≥ Stripe Integration

### Checkout System
**3 –æ—Å–Ω–æ–≤–Ω—ã—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞:**
1. `CheckoutModal.tsx` - –ë–∞–∑–æ–≤–∞—è –æ–ø–ª–∞—Ç–∞
2. `EnhancedCheckoutModal.tsx` - –° gift cards
3. `SmartCheckoutModal.tsx` - –£–º–Ω–∞—è –æ–ø–ª–∞—Ç–∞ —Å AI

### Payment Options
- **Stripe Card Payment** - –æ—Å–Ω–æ–≤–Ω–æ–π –º–µ—Ç–æ–¥
- **Gift Certificate** - –ø—Ä–∏–º–µ–Ω–µ–Ω–∏–µ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–æ–≤
- **Deposit** - —á–∞—Å—Ç–∏—á–Ω–∞—è –æ–ø–ª–∞—Ç–∞ (Stripe Connect)
- **Pay Later** - –æ—Ç–ª–æ–∂–µ–Ω–Ω–∞—è –æ–ø–ª–∞—Ç–∞

### Subscription Plans
**–°–æ–∑–¥–∞–Ω–æ –≤ Stripe Dashboard:**
```
prod_BasicStart: price_BasicMonthly (AED99)
prod_StandardGrowth: price_StandardMonthly (AED299)
prod_BusinessPro: price_BusinessMonthly (AED499)
```

### 18 Backend Endpoints
```
POST /make-server-3e5c72fb/checkout/create-session
POST /make-server-3e5c72fb/checkout/verify-session
POST /make-server-3e5c72fb/checkout/process-payment
POST /make-server-3e5c72fb/stripe/subscription/create
POST /make-server-3e5c72fb/stripe/subscription/cancel
GET  /make-server-3e5c72fb/stripe/subscription/:id
POST /make-server-3e5c72fb/deposit/create-account
POST /make-server-3e5c72fb/deposit/create-session
...–∏ –¥—Ä—É–≥–∏–µ
```

### Session Tracking
```typescript
interface SessionTracking {
  sessionId: string;
  salonId: string;
  amount: number;
  currency: string;
  status: 'pending' | 'completed' | 'failed';
  createdAt: number;
}
```

---

## üìÖ Booking System

### –î–≤—É—Å—Ç–æ—Ä–æ–Ω–Ω–∏–π Workflow

**Phase 1: Client Creates Booking**
```
Client ‚Üí Select Service ‚Üí Choose Time ‚Üí Pay Deposit
Status: "pending_salon_confirmation"
```

**Phase 2: Salon Confirms**
```
Salon ‚Üí Review Booking ‚Üí Confirm/Reject
Status: "confirmed" | "rejected"
```

**Phase 3: Client Confirms**
```
Client ‚Üí Review Confirmed ‚Üí Final Confirmation
Status: "client_confirmed"
```

### Payment Options

**Option 1: Deposit (Recommended)**
- Client –ø–ª–∞—Ç–∏—Ç 30% deposit
- Salon –ø–æ–ª—É—á–∞–µ—Ç —á–µ—Ä–µ–∑ Stripe Connect
- –û—Å—Ç–∞—Ç–æ–∫ –ø–ª–∞—Ç–∏—Ç—Å—è –ø—Ä–∏ –≤–∏–∑–∏—Ç–µ
- Auto-refund –µ—Å–ª–∏ salon –æ—Ç–º–µ–Ω—è–µ—Ç

**Option 2: Full Payment**
- Client –ø–ª–∞—Ç–∏—Ç 100% —Å—Ä–∞–∑—É
- Salon –ø–æ–ª—É—á–∞–µ—Ç –ø–æ—Å–ª–µ –≤–∏–∑–∏—Ç–∞
- Refund policy applies

**Option 3: Pay Later**
- –¢–æ–ª—å–∫–æ –¥–ª—è verified clients
- Payment –ø—Ä–∏ –≤–∏–∑–∏—Ç–µ
- Salon –º–æ–∂–µ—Ç –æ—Ç–∫–ª–æ–Ω–∏—Ç—å

### –ê–≤—Ç–æ–±–ª–æ–∫–∏—Ä–æ–≤–∫–∞ –°–∞–ª–æ–Ω–æ–≤
```typescript
// –ï—Å–ª–∏ —Å–∞–ª–æ–Ω –Ω–µ –æ–ø–ª–∞—Ç–∏–ª subscription
if (subscriptionExpired && !isPaid) {
  salon.status = 'blocked';
  // –í—Å–µ bookings cancelled
  // Email notification –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω
  // 7 days grace period
}
```

### Cancellation & Refunds

**Client Cancels:**
- –î–æ 24h: 100% refund
- 12-24h: 50% refund
- <12h: No refund

**Salon Cancels:**
- –í—Å–µ–≥–¥–∞: 100% refund
- + Compensation 10%

---

## üè¢ Multi-Salon Management

### Salon Switcher
- Dropdown –≤ header
- –ë—ã—Å—Ç—Ä–æ–µ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ
- –†–∞–∑–¥–µ–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ
- –ï–¥–∏–Ω—ã–π Owner –∞–∫–∫–∞—É–Ω—Ç

### Staff Management
- Invite –ø–æ email
- Role assignment
- Permissions control
- Activity tracking

### Analytics Per Salon
- Revenue –æ—Ç–¥–µ–ª—å–Ω–æ
- Clients –æ—Ç–¥–µ–ª—å–Ω–æ
- Masters –æ—Ç–¥–µ–ª—å–Ω–æ
- Bookings –æ—Ç–¥–µ–ª—å–Ω–æ

---

## üì± PWA (Progressive Web App)

### –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏
- ‚úÖ Install –Ω–∞ home screen
- ‚úÖ Offline support
- ‚úÖ Service Worker caching
- ‚úÖ Push notifications ready
- ‚úÖ App-like experience

### –§–∞–π–ª—ã
```
/public/manifest.json - App manifest
/public/service-worker.js - SW logic
/public/icons/ - App icons (–≤—Å–µ —Ä–∞–∑–º–µ—Ä—ã)
/public/offline.html - Offline fallback
```

### Install Prompt
```typescript
<PWAInstallBanner />
// –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç –∫–æ–≥–¥–∞ PWA criteria –≤—ã–ø–æ–ª–Ω–µ–Ω—ã
// –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –º–æ–∂–µ—Ç —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
```

---

## üñºÔ∏è Supabase Storage System

### 7 –ö–∞—Ç–µ–≥–æ—Ä–∏–π Storage

1. **salons/** - –§–æ—Ç–æ —Å–∞–ª–æ–Ω–æ–≤
2. **services/** - –ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è —É—Å–ª—É–≥
3. **products/** - –§–æ—Ç–æ –ø—Ä–æ–¥—É–∫—Ç–æ–≤
4. **masters/** - –ê–≤–∞—Ç–∞—Ä—ã –º–∞—Å—Ç–µ—Ä–æ–≤
5. **clients/** - –§–æ—Ç–æ –∫–ª–∏–µ–Ω—Ç–æ–≤
6. **beauty-feed/** - Beauty feed –≥–∞–ª–µ—Ä–µ—è
7. **certificates/** - –ü–æ–¥–∞—Ä–æ—á–Ω—ã–µ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç—ã

### Auto-Seeder
**30 –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π —Å Unsplash:**
- 5 —Å–∞–ª–æ–Ω–æ–≤
- 6 —É—Å–ª—É–≥ (haircut, nails, etc.)
- 6 –ø—Ä–æ–¥—É–∫—Ç–æ–≤ (shampoo, serum, etc.)
- 4 –º–∞—Å—Ç–µ—Ä–∞
- 3 –∫–ª–∏–µ–Ω—Ç–∞
- 4 beauty feed
- 2 certificates

### Storage Admin UI
**–î–æ—Å—Ç—É–ø: `/#/storage-admin`**

–§—É–Ω–∫—Ü–∏–∏:
- ‚úÖ –ü—Ä–æ—Å–º–æ—Ç—Ä –≤—Å–µ—Ö buckets
- ‚úÖ Upload –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π
- ‚úÖ Delete –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π
- ‚úÖ One-click seeding (35 —Å–µ–∫—É–Ω–¥)
- ‚úÖ Storage statistics
- ‚úÖ Category breakdown

### React Hooks
```typescript
// Upload hook
const { upload, loading, error } = useImageUpload();
await upload(file, 'salons');

// Display component
<SupabaseImage 
  path="salons/luxury-salon-1.jpg"
  alt="Salon"
  className="w-full"
/>
```

---

## üìä Analytics & CRM

### Dashboard Metrics

**Revenue Tracking:**
- Total revenue
- Monthly breakdown
- Per-salon revenue
- Growth trends

**Client Analytics:**
- New clients
- Returning clients
- Churn rate
- LTV (Lifetime Value)

**Booking Analytics:**
- Bookings –ø–æ –≤—Ä–µ–º–µ–Ω–∏
- Popular services
- Peak hours
- Cancellation rate

**Master Performance:**
- Revenue per master
- Bookings per master
- Client rating
- Monthly targets

### Advanced Features
- ‚úÖ Email campaign manager
- ‚úÖ SMS notifications (–≥–æ—Ç–æ–≤–æ)
- ‚úÖ Loyalty programs
- ‚úÖ Referral system
- ‚úÖ Wait list management
- ‚úÖ Dynamic pricing
- ‚úÖ Forecasting AI

---

## üé® Quick Retail Demo

### 32 Real Products
**6 Categories:**
1. Hair Care (8 products)
2. Skin Care (6 products)
3. Tools (6 products)
4. Styling (4 products)
5. Nail Care (4 products)
6. Accessories (4 products)

### Interactive Features
- ‚úÖ Add to cart
- ‚úÖ Quantity selector
- ‚úÖ Stock tracking
- ‚úÖ Category filters
- ‚úÖ Search
- ‚úÖ Multi-currency prices
- ‚úÖ Checkout flow
- ‚úÖ Order summary

**–î–æ—Å—Ç—É–ø:** `/#/quick-retail`

---

## üß™ Testing Coverage

### Unit Tests
- **AuthContext**: 16 tests, 95% coverage
- **Utilities**: Various helpers
- **Components**: Selected components

### CI/CD Testing
- ‚úÖ Auto-run –Ω–∞ –∫–∞–∂–¥—ã–π push
- ‚úÖ PR coverage reports
- ‚úÖ ESLint checks
- ‚úÖ Prettier formatting
- ‚úÖ TypeScript type-check

### Test Commands
```bash
npm test                 # Run all
npm run test:coverage    # With coverage
npm run test:watch       # Watch mode
npm test AuthContext     # Specific file
```

---

## üîê Role-Based Access Control

### Owner (–í–ª–∞–¥–µ–ª–µ—Ü)
- –°–æ–∑–¥–∞–µ—Ç —Å–∞–ª–æ–Ω—ã
- –£–ø—Ä–∞–≤–ª—è–µ—Ç –ø–æ–¥–ø–∏—Å–∫–∞–º–∏
- –ü—Ä–∏–≥–ª–∞—à–∞–µ—Ç –∞–¥–º–∏–Ω–æ–≤
- –í–∏–¥–∏—Ç –≤—Å—é –∞–Ω–∞–ª–∏—Ç–∏–∫—É
- Multi-salon –¥–æ—Å—Ç—É–ø

### Admin (–ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä)
- –£–ø—Ä–∞–≤–ª—è–µ—Ç –∫–∞–ª–µ–Ω–¥–∞—Ä–µ–º
- –î–æ–±–∞–≤–ª—è–µ—Ç –º–∞—Å—Ç–µ—Ä–æ–≤
- –£–ø—Ä–∞–≤–ª—è–µ—Ç —É—Å–ª—É–≥–∞–º–∏
- –í–∏–¥–∏—Ç –∫–ª–∏–µ–Ω—Ç–æ–≤
- Email campaigns

### Master (–ú–∞—Å—Ç–µ—Ä)
- –°–≤–æ–π –∫–∞–ª–µ–Ω–¥–∞—Ä—å
- –°–≤–æ–∏ –∫–ª–∏–µ–Ω—Ç—ã
- –°–≤–æ–∏ —É—Å–ª—É–≥–∏
- Limited analytics
- Booking management

### Client (–ö–ª–∏–µ–Ω—Ç)
- –ë—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —É—Å–ª—É–≥
- –ò—Å—Ç–æ—Ä–∏—è –≤–∏–∑–∏—Ç–æ–≤
- Gift cards
- Favorites
- Profile management

---

*–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –æ–±–Ω–æ–≤–ª–µ–Ω–∞: 25 –¥–µ–∫–∞–±—Ä—è 2024*
